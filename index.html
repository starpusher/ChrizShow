<!doctype html>
<html lang="de">
<head>
  <script src="https://www.gstatic.com/firebasejs/12.6.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore-compat.js"></script>
<script>
  const firebaseConfig = {
    apiKey: "AIzaSyAQdAqEtJPRC2b85DQx6H0-CLP18KnXUCk",
    authDomain: "chrizshow-4f8ca.firebaseapp.com",
    projectId: "chrizshow-4f8ca",
    storageBucket: "chrizshow-4f8ca.firebasestorage.app",
    messagingSenderId: "444960924918",
    appId: "1:444960924918:web:71fd864319bf67e2d3f8d7"
  };
  firebase.initializeApp(firebaseConfig);
  window.db = firebase.firestore();
</script>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>House of Questions</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo">CS</div>
      <div class="title-full">ChrizShow</div>
      <div class="subtitle">hosted by Chris</div>
    </div>

    <div class="players" id="playersBar"></div>

    <div class="controls">
      <button id="presentBtn" title="Publikumsfenster √∂ffnen">Pr√§sentation</button>
      <button id="editorBtn" title="Board-JSON bearbeiten und herunterladen">Editor</button>
      <button id="addPlayerBtn">+ Spieler</button>
      <button id="undoBtn" title="Letzte Aktion r√ºckg√§ngig (Strg+Z)">Undo</button>
      <button id="exportBtn">Export</button>
      <button id="importBtn">Import</button>
      <input id="importFile" type="file" accept="application/json" hidden />
      <button id="resetBtn">Reset</button>
      <button id="roundResetBtn" title="Nur Board leeren (Punkte/Spieler bleiben)">Board reset</button>
      <select id="boardSelect">
        <option value="">Board w√§hlen‚Ä¶</option>
      </select>
      <button id="loadBtn">Spiel laden</button>
      <input id="loadFile" type="file" accept="application/json" hidden />
    </div>
  </header>

  <main>
    <section id="board" class="board" aria-live="polite"></section>
  </main>

  <!-- Overlay unten -->
  <footer id="overlay" class="overlay"></footer>

  <!-- Frage-Modal -->
  <dialog id="qModal">
    <form method="dialog" class="modal">
      <header class="qhead">
        <h3 id="qCat"></h3>
        <span id="qPts" class="qpts"></span>
        <div id="turnBadge" class="turnbadge" hidden></div>
        
        <div class="buzzwrap">
          <button id="buzzBtn" type="button" class="buzz" disabled>üîî BUZZ</button>
          <div id="buzzQueue" class="buzzqueue" hidden></div>
        </div>
<button id="timerBtn" type="button" class="timer">‚è± 10s</button>
        <div id="timerBox" class="timerbox" hidden>10</div>
      </header>

      <div id="qText" class="qtext"></div>
      <img id="qImg" class="qimg" alt="" hidden />
      <audio id="qAud" controls hidden></audio>
      <video id="qVid" controls class="qvid" hidden></video>

      <div class="answer-wrap">
        <button id="revealBtn" type="button">Antwort zeigen</button>
        <button id="swapImageBtn" type="button" hidden>Bild umschalten</button>
        <div id="answer" class="answer" hidden></div>
<div id="answerImages" class="answrap" hidden>
  <img id="ansImg1" class="ansimg" alt="">
  <img id="ansImg2" class="ansimg" alt="">
</div>
      </div>

      <div class="attempts">
        <label>Spieler:</label>
        <select id="playerSelect"></select>
        <span id="attemptInfo"></span>
      </div>

      <div class="actions">
        <button id="correctBtn" type="button" class="ok">Richtig</button>
        <button id="wrongBtn"   type="button" class="bad">Falsch (‚àí¬Ω)</button>
        <button id="skipBtn"    type="button">√úberspringen</button>
        <button id="pauseAud" type="button">‚è∏ Audio</button>
        <button id="playAud" type="button">‚ñ∂ Audio</button>
      </div>

      <menu>
        <button id="closeBtn" value="close">Schlie√üen</button>
      </menu>
    </form>
  </dialog>


  <!-- Editor-Modal (einfach: JSON bearbeiten & herunterladen) -->
  <dialog id="editorModal">
    <form method="dialog" class="modal editor">
      <header class="qhead">
        <h3>Board-Editor</h3>
        <div style="margin-left:auto;display:flex;gap:8px;flex-wrap:wrap;justify-content:flex-end">
          <button id="editorLoadBtn" type="button">JSON laden‚Ä¶</button>
          <button id="editorApplyBtn" type="button">Als Board laden</button>
          <button id="editorDownloadBtn" type="button">Download JSON</button>
        </div>
      </header>
      <textarea id="editorText" spellcheck="false" style="width:100%;height:60vh;resize:vertical;background:#0f0f1e;color:#f4f5f9;border:1px solid #2f2f4b;border-radius:12px;padding:12px;font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', monospace;font-size:13px;line-height:1.4"></textarea>
      <menu>
        <button value="close">Schlie√üen</button>
      </menu>
      <input id="editorFile" type="file" accept="application/json" hidden />
    </form>
  </dialog>

  <!-- FX overlay for correct/wrong -->
  <div id="fx"></div>

  <audio id="sfxCorrect" preload="auto" hidden></audio>
<audio id="sfxWrong" preload="auto" hidden></audio>
  <script src="app.js" defer></script>
</body>
</html>
